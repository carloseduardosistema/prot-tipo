<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Perfil</title>

<link rel="stylesheet" href="css/style.css">
 <link rel="icon" href="Gemini_Generated_Image_1nenyi1nenyi1nen.png" type="image/png">
<link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">

<style>
.perfil{
  max-width:520px;
  margin:80px auto;
  background:rgba(255,255,255,.07);
  padding:40px;
  border-radius:22px;
  text-align:center;
  color:#fff;
}

.perfil img{
  width:150px;
  height:150px;
  border-radius:50%;
  object-fit:cover;
  border:4px solid #2ecc71;
  margin-bottom:20px;
}

.perfil input{
  width:100%;
  margin:12px 0;
  padding:14px;
  border-radius:22px;
  border:none;
}

.perfil button{
  margin-top:15px;
  width:100%;
  padding:14px;
  border:none;
  border-radius:25px;
  background:#2ecc71;
  color:#fff;
  font-weight:600;
}

.logout{
  background:#ff6b6b !important;
}
</style>
</head>

<body>

<script>
if (!sessionStorage.getItem("logado")) {
  location.href = "index.html";
}
</script>

<div class="perfil">

  <img id="avatar" src="https://via.placeholder.com/150">

  <input type="file" id="upload" accept="image/png,image/jpeg">

  <input type="email" id="emailEdit">

  <button onclick="salvar()">Salvar Alterações</button>
  <button class="logout" onclick="logout()">Sair</button>

</div>

<script>
emailEdit.value = sessionStorage.getItem("usuario");
avatar.src = localStorage.getItem("fotoPerfil") || avatar.src;

upload.addEventListener("change", e => {
  const file = e.target.files[0];
  if (!file || !file.type.includes("image")) return;

  const reader = new FileReader();
  reader.onload = () => avatar.src = reader.result;
  reader.readAsDataURL(file);
});

function salvar(){
  sessionStorage.setItem("usuario", emailEdit.value);
  localStorage.setItem("fotoPerfil", avatar.src);
  alert("Perfil atualizado!");
  location.href = "tela_principal.html";
}

function logout(){
  sessionStorage.clear();
  location.href = "index.html";
}
</script>

</body>
</html>
